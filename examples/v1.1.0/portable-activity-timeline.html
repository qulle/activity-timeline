<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=1"><link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='rgb(59, 67, 82)' class='bi bi-diagram-3-fill' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M6 3.5A1.5 1.5 0 0 1 7.5 2h1A1.5 1.5 0 0 1 10 3.5v1A1.5 1.5 0 0 1 8.5 6v1H14a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 2 7h5.5V6A1.5 1.5 0 0 1 6 4.5v-1zm-6 8A1.5 1.5 0 0 1 1.5 10h1A1.5 1.5 0 0 1 4 11.5v1A1.5 1.5 0 0 1 2.5 14h-1A1.5 1.5 0 0 1 0 12.5v-1zm6 0A1.5 1.5 0 0 1 7.5 10h1a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 8.5 14h-1A1.5 1.5 0 0 1 6 12.5v-1zm6 0a1.5 1.5 0 0 1 1.5-1.5h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1a1.5 1.5 0 0 1-1.5-1.5v-1z'/%3E%3C/svg%3E" type="image/svg+xml"><title>Activity Timeline</title></head><body>  <style>*{box-sizing:border-box;outline:none}html{-ms-overflow-style:none;scrollbar-width:none}html::-webkit-scrollbar{display:none}body{-webkit-user-select:none;user-select:none;margin:0;font-family:Arial,sans-serif}p{font-size:1.125rem}.at-m-0{margin:0}.at-link{color:#6397c2;text-decoration:none}.at-link:focus{text-decoration:underline}.at-animations--bounce{animation:at-bounce .25s forwards}@keyframes at-bounce{0%{opacity:.6;transform:scale(.95)}50%{opacity:.8;transform:scale(1.05)}to{opacity:1;transform:scale(1)}}.at-canvas{display:block}.at-canvas--highlight{background-color:#c9e2f3;transition:background-color .1s ease-in-out}.at-context-menu{max-width:250px;min-width:200px;-webkit-user-select:none;user-select:none;text-shadow:1px 1px #0000001a;background-color:#f6f6f6;border-radius:4px;margin:0;padding:0;font-size:.875rem;list-style:none;display:none;position:fixed;box-shadow:1px 1px #0003}.at-context-menu__item{cursor:pointer;text-overflow:ellipsis;white-space:nowrap;color:#3b4352;border-radius:4px;align-items:center;margin:.25rem;padding:.563rem .875rem .563rem .5rem;transition:background-color .1s ease-in-out;display:flex;overflow:hidden}.at-context-menu__item:hover,.at-context-menu__item:focus{color:#0166a5;background-color:#c9e2f3}.at-context-menu__icon{filter:drop-shadow(1px 1px #0000001a);margin:0;padding-right:.625rem;display:flex}.at-context-menu__icon svg{width:20px;height:20px}.at-context-menu--show{display:block}.at-modal-backdrop{width:100%;height:100%;z-index:900;text-align:center;background-color:#0009;display:block;position:absolute;top:0;left:0;overflow-y:auto}.at-modal-backdrop--fixed{position:fixed}.at-modal{text-align:left;max-width:1350px;min-width:450px;background-color:#fff;border-radius:4px;margin:2rem 1rem;padding:1.5rem;display:inline-block;box-shadow:1px 1px #0000004d}.at-modal__header{place-content:center space-between;margin-bottom:1rem;display:flex}.at-modal__title{color:#3b4352;align-items:center;margin:0;display:flex}.at-modal__close{color:#3b4352;width:1.75rem;height:1.75rem;border-radius:4px;justify-content:center;align-items:center;margin:0;display:flex}.at-modal__content{color:#3b4352}.at-modal__content>:last-child{margin-bottom:0}@media only screen and (max-width:576px){.at-modal{min-width:calc(100% - 2rem)}}.at-dialog-backdrop{width:100%;height:100%;z-index:900;text-align:center;background-color:#0009;position:absolute;top:0;left:0}.at-dialog-backdrop--fixed{position:fixed}.at-dialog{max-width:90%;color:#3b4352;background-color:#fff;border-radius:4px;margin:2rem auto;padding:1.5rem;display:inline-block;box-shadow:1px 1px #0000004d}.at-dialog__input{width:250px;margin-bottom:1rem}.at-dialog__btn{padding:.5rem .625rem}.at-dialog__btn:last-child{margin-left:.5rem}.at-dialog__btn:only-child{margin:0}.at-canvas{display:block}.at-canvas--highlight{background-color:#c9e2f3;transition:background-color .1s ease-in-out}.at-btn{text-align:center;-webkit-user-select:none;user-select:none;cursor:pointer;color:#fff;text-shadow:1px 1px #0000001a;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-khtml-user-select:none;background-color:#0000;border:none;border-radius:4px;justify-content:center;align-items:center;padding:.5rem;font-size:1rem;font-weight:400;display:inline-flex;box-shadow:1px 1px #0003}.at-btn:focus{-webkit-tap-highlight-color:transparent;-ms-touch-action:manipulation;touch-action:manipulation;outline:none}.at-btn--blank{box-shadow:none;color:#3b4352;padding:0}.at-btn--blank:focus{box-shadow:0 0 0 3px #959dad80}.at-btn--blue-mid{background-color:#6397c2}.at-btn--blue-mid:focus{box-shadow:0 0 0 3px #6397c280}</style> <canvas id="activity-timeline" class="at-canvas" tabindex="0"></canvas>  <script type="module">function e(e){return e&&e.__esModule?e.default:e}var t;const i={meta:{version:(t=JSON.parse('{"name":"activity-timeline","version":"1.1.0","description":"Portable activity timeline that draws the timeline based on data given in JSON format.","scripts":{"start":"parcel src/index.html --open","build":"parcel build --public-url . src/index.html","clean":"rm -rf dist/ .parcel-cache/","test":"echo \\"Error: no test specified\\" && exit 1"},"keywords":[],"author":"Qulle - https://github.com/qulle","license":"BSD-2-Clause license","devDependencies":{"@parcel/transformer-sass":"^2.6.2","@types/node":"^18.6.3","@types/papaparse":"^5.3.3","papaparse":"^5.3.2","parcel":"^2.6.2"}}')).version,locale:"en-us"},style:{fontSize:14,lineThickness:2,timelineStrokeColor:"#3B4352",strokeColor:"#3B4352",fillColor:"#BAC8D3",textColor:"#3B4352",backgroundColor:"#FFFFFF"},days:[]},n={value:1,factor:.05,min:.25,max:2.5},s={left:0,top:0,x:0,y:0},a={highlightClass:"at-canvas--highlight",ladingPageWidth:600,ladingPageHeight:300,radius:18,amplification:2,stepDistanceXAxis:150,stepDistanceYAxis:80,canvasInternalPadding:20,xPadding:150,yPadding:80},r=function(e){const t=this.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0],i=this.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=i[i.length-1];"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault()))},o={width:24,height:24,fill:"currentColor",stroke:"none",class:"",path:""},l=function(e){const t={...o,...e};return`\n        <svg xmlns="http://www.w3.org/2000/svg" \n            width="${t.width}" \n            height="${t.height}" \n            fill="${t.fill}"\n            stroke="${t.stroke}" \n            class="${t.class}" \n            viewBox="0 0 16 16">\n            ${t.path}\n        </svg>\n    `},h={Close:'\n        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n    ',Export:'\n        <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n        <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>\n    ',GitHub:'\n        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>\n    ',ZoomIn:'\n        <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n        <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>\n        <path fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"/>\n    ',ZoomOut:'\n        <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n        <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>\n        <path fill-rule="evenodd" d="M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>\n    '};var d=class{constructor(e){this.timeline=e,this.create()}create(){this.menu=document.createElement("ul"),this.menu.className="at-context-menu",this.menu.setAttribute("tabindex","-1"),this.menu.addEventListener("keydown",r),this.addMenuItem("Export as PNG",this.timeline.contextmenuOnExportPNG,l({path:h.Export,fill:"currentColor",stroke:"none"})),this.addMenuItem("Zoom in",this.timeline.contextmenuOnZoomIn,l({path:h.ZoomIn,fill:"currentColor",stroke:"none"})),this.addMenuItem("Zoom out",this.timeline.contextmenuOnZoomOut,l({path:h.ZoomOut,fill:"currentColor",stroke:"none"})),this.addMenuItem("About",this.timeline.contextmenuOnAbout,l({path:h.GitHub,fill:"currentColor",stroke:"none"})),document.body.appendChild(this.menu)}addMenuItem(e,t,i){const n=document.createElement("li");n.className="at-context-menu__item",n.textContent=e,n.setAttribute("tabindex","0"),n.addEventListener("click",(()=>{this.click(t)})),n.addEventListener("keyup",(e=>{"enter"===e.key.toLowerCase()&&this.click(t)}));const s=document.createElement("span");s.className="at-context-menu__icon",s.innerHTML=i,n.insertAdjacentElement("afterbegin",s),this.menu.appendChild(n)}click(e){this.hide(),e.call(this.timeline,this.clickedCoordinate.x,this.clickedCoordinate.y)}show(e){this.clickedCoordinate={x:e.clientX,y:e.clientY},this.menu.style.left=`${e.clientX}px`,this.menu.style.top=`${e.clientY}px`,this.menu.classList.add("at-context-menu--show"),this.menu.focus()}hide(){this.menu.classList.remove("at-context-menu--show")}};var c=class{constructor(e){const t=document.createElement("div");t.className="at-modal-backdrop at-modal-backdrop--fixed",t.setAttribute("tabindex","1"),t.addEventListener("keydown",r),t.addEventListener("click",this.bounceAnimation.bind(this));const i=document.createElement("div");i.className="at-modal at-animations--bounce";const n=document.createElement("div");n.className="at-modal__header";const s=document.createElement("h3");s.className="at-modal__title",s.innerHTML=e;const a=document.createElement("button");a.setAttribute("type","button"),a.className="at-modal__close at-btn at-btn--blank",a.innerHTML=l({path:h.Close,fill:"none",stroke:"currentColor"}),a.addEventListener("click",(e=>{e.preventDefault(),this.close()})),t.appendChild(i),i.appendChild(n),n.appendChild(s),n.appendChild(a),this.modalBackdrop=t,this.modal=i,window.addEventListener("keyup",(e=>{"Escape"===e.key&&this.close()}))}bounceAnimation(e){e.target===this.modalBackdrop&&(this.modal.classList.remove("at-animations--bounce"),this.modal.offsetWidth,this.modal.classList.add("at-animations--bounce"))}show(e){this.modal.appendChild(e),document.body.appendChild(this.modalBackdrop),this.modal.focus()}close(){this.modalBackdrop.removeEventListener("keydown",r),this.modalBackdrop.remove()}};var u=class extends c{constructor(e,t){super(e);const i=document.createElement("div");i.className="at-modal__content",i.innerHTML=t,this.show(i)}};var f=class{constructor(){const e=document.createElement("div");e.className="at-dialog-backdrop at-dialog-backdrop--fixed",e.setAttribute("tabindex","-1"),e.addEventListener("keydown",r),e.addEventListener("click",this.bounceAnimation.bind(this)),this.dialogBackdrop=e,window.addEventListener("keyup",(e=>{"Escape"===e.key&&this.close()}))}bounceAnimation(e){if(e.target!==this.dialogBackdrop)return;const t=this.dialogBackdrop.firstElementChild;t.classList.remove("at-animations--bounce"),t.offsetWidth,t.classList.add("at-animations--bounce")}close(){this.dialogBackdrop.removeEventListener("keydown",r),this.dialogBackdrop.remove()}};var m,p=class extends f{constructor(e){super();const t=document.createElement("div");t.className="at-dialog at-dialog--alert at-animations--bounce",t.innerHTML=e;const i=document.createElement("button");i.setAttribute("type","button"),i.className="at-dialog__btn at-btn at-btn--blue-mid",i.innerText="Got it!",i.addEventListener("click",(e=>{this.close()})),t.appendChild(i),this.dialogBackdrop.appendChild(t),document.body.appendChild(this.dialogBackdrop),this.dialogBackdrop.focus()}},g={};m=function e(){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},i=!t.document&&!!t.postMessage,n=i&&/blob:/i.test((t.location||{}).protocol),s={},a=0,r={parse:function(i,n){var o=(n=n||{}).dynamicTyping||!1;if(k(o)&&(n.dynamicTypingFunction=o,o={}),n.dynamicTyping=o,n.transform=!!k(n.transform)&&n.transform,n.worker&&r.WORKERS_SUPPORTED){var l=function(){if(!r.WORKERS_SUPPORTED)return!1;var i,n,o=(i=t.URL||t.webkitURL||null,n=e.toString(),r.BLOB_URL||(r.BLOB_URL=i.createObjectURL(new Blob(["(",n,")();"],{type:"text/javascript"})))),l=new t.Worker(o);return l.onmessage=g,l.id=a++,s[l.id]=l}();return l.userStep=n.step,l.userChunk=n.chunk,l.userComplete=n.complete,l.userError=n.error,n.step=k(n.step),n.chunk=k(n.chunk),n.complete=k(n.complete),n.error=k(n.error),delete n.worker,void l.postMessage({input:i,config:n,workerId:l.id})}var f=null;return r.NODE_STREAM_INPUT,"string"==typeof i?f=n.download?new h(n):new c(n):!0===i.readable&&k(i.read)&&k(i.on)?f=new u(n):(t.File&&i instanceof File||i instanceof Object)&&(f=new d(n)),f.stream(i)},unparse:function(e,t){var i=!1,n=!0,s=",",a="\r\n",o='"',l=o+o,h=!1,d=null,c=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||r.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(s=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(i=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(h=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(o=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");d=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+o),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(c=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var u=new RegExp(m(o),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,h);if("object"==typeof e[0])return f(d||Object.keys(e[0]),e,h)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||d),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],h);throw new Error("Unable to serialize unrecognized input");function f(e,t,i){var r="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var o=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(o&&n){for(var h=0;h<e.length;h++)0<h&&(r+=s),r+=p(e[h],h);0<t.length&&(r+=a)}for(var d=0;d<t.length;d++){var c=o?e.length:t[d].length,u=!1,f=o?0===Object.keys(t[d]).length:0===t[d].length;if(i&&!o&&(u="greedy"===i?""===t[d].join("").trim():1===t[d].length&&0===t[d][0].length),"greedy"===i&&o){for(var m=[],g=0;g<c;g++){var v=l?e[g]:g;m.push(t[d][v])}u=""===m.join("").trim()}if(!u){for(var y=0;y<c;y++){0<y&&!f&&(r+=s);var C=o&&l?e[y]:y;r+=p(t[d][C],y)}d<t.length-1&&(!i||0<c&&!f)&&(r+=a)}}return r}function p(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var n=!1;c&&"string"==typeof e&&c.test(e)&&(e="'"+e,n=!0);var a=e.toString().replace(u,l);return(n=n||!0===i||"function"==typeof i&&i(e,t)||Array.isArray(i)&&i[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1}(a,r.BAD_DELIMITERS)||-1<a.indexOf(s)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?o+a+o:a}}};if(r.RECORD_SEP=String.fromCharCode(30),r.UNIT_SEP=String.fromCharCode(31),r.BYTE_ORDER_MARK="\ufeff",r.BAD_DELIMITERS=["\r","\n",'"',r.BYTE_ORDER_MARK],r.WORKERS_SUPPORTED=!i&&!!t.Worker,r.NODE_STREAM_INPUT=1,r.LocalChunkSize=10485760,r.RemoteChunkSize=5242880,r.DefaultDelimiter=",",r.Parser=p,r.ParserHandle=f,r.NetworkStreamer=h,r.FileStreamer=d,r.StringStreamer=c,r.ReadableStreamStreamer=u,t.jQuery){var o=t.jQuery;o.fn.parse=function(e){var i=e.config||{},n=[];return this.each((function(e){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var s=0;s<this.files.length;s++)n.push({file:this.files[s],inputElem:this,instanceConfig:o.extend({},i)})})),s(),this;function s(){if(0!==n.length){var t,i,s,l=n[0];if(k(e.before)){var h=e.before(l.file,l.inputElem);if("object"==typeof h){if("abort"===h.action)return t=l.file,i=l.inputElem,s=h.reason,void(k(e.error)&&e.error({name:"AbortError"},t,i,s));if("skip"===h.action)return void a();"object"==typeof h.config&&(l.instanceConfig=o.extend(l.instanceConfig,h.config))}else if("skip"===h)return void a()}var d=l.instanceConfig.complete;l.instanceConfig.complete=function(e){k(d)&&d(e,l.file,l.inputElem),a()},r.parse(l.file,l.instanceConfig)}else k(e.complete)&&e.complete()}function a(){n.splice(0,1),s()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=C(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,i){if(this.isFirstChunk&&k(this._config.beforeFirstChunk)){var s=this._config.beforeFirstChunk(e);void 0!==s&&(e=s)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var o=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=o.meta.cursor;this._finished||(this._partialLine=a.substring(l-this._baseIndex),this._baseIndex=l),o&&o.data&&(this._rowCount+=o.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:o,workerId:r.WORKER_ID,finished:h});else if(k(this._config.chunk)&&!i){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!h||!k(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){k(this._config.error)?this._config.error(e):n&&this._config.error&&t.postMessage({workerId:r.WORKER_ID,error:e,finished:!1})}}function h(e){var t;(e=e||{}).chunkSize||(e.chunkSize=r.RemoteChunkSize),l.call(this,e),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),i||(t.onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var n in e)t.setRequestHeader(n,e[n])}if(this._config.chunkSize){var s=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+s)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}i&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(e=t.getResponseHeader("Content-Range"))?-1:parseInt(e.substring(e.lastIndexOf("/")+1))),this.parseChunk(t.responseText)))},this._chunkError=function(e){var i=t.statusText||e;this._sendError(new Error(i))}}function d(e){var t,i;(e=e||{}).chunkSize||(e.chunkSize=r.LocalChunkSize),l.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,i=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var s=Math.min(this._start+this._config.chunkSize,this._input.size);e=i.call(e,this._start,s)}var a=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function c(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,i=this._config.chunkSize;return i?(e=t.substring(0,i),t=t.substring(i)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function u(e){l.call(this,e=e||{});var t=[],i=!0,n=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=_((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=_((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=_((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=_((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(e){var t,i,n,s=Math.pow(2,53),a=-s,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,h=this,d=0,c=0,u=!1,f=!1,g=[],v={data:[],errors:[],meta:{}};if(k(e.step)){var y=e.step;e.step=function(t){if(v=t,w())b();else{if(b(),0===v.data.length)return;d+=t.data.length,e.preview&&d>e.preview?i.abort():(v.data=v.data[0],y(v,h))}}}function _(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function b(){return v&&n&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+r.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(v.data=v.data.filter((function(e){return!_(e)}))),w()&&function(){if(v)if(Array.isArray(v.data[0])){for(var t=0;w()&&t<v.data.length;t++)v.data[t].forEach(i);v.data.splice(0,1)}else v.data.forEach(i);function i(t,i){k(e.transformHeader)&&(t=e.transformHeader(t,i)),g.push(t)}}(),function(){if(!v||!e.header&&!e.dynamicTyping&&!e.transform)return v;function t(t,i){var n,s=e.header?{}:[];for(n=0;n<t.length;n++){var a=n,r=t[n];e.header&&(a=n>=g.length?"__parsed_extra":g[n]),e.transform&&(r=e.transform(r,a)),r=E(a,r),"__parsed_extra"===a?(s[a]=s[a]||[],s[a].push(r)):s[a]=r}return e.header&&(n>g.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+n,c+i):n<g.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+n,c+i)),s}var i=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(t),i=v.data.length):v.data=t(v.data,0),e.header&&v.meta&&(v.meta.fields=g),c+=i,v}()}function w(){return e.header&&0===g.length}function E(t,i){var n;return n=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(function(e){if(o.test(e)){var t=parseFloat(e);if(a<t&&t<s)return!0}return!1}(i)?parseFloat(i):l.test(i)?new Date(i):""===i?null:i):i}function x(e,t,i,n){var s={type:e,code:t,message:i};void 0!==n&&(s.row=n),v.errors.push(s)}this.parse=function(s,a,o){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var i=new RegExp(m(t)+"([^]*?)"+m(t),"gm"),n=(e=e.replace(i,"")).split("\r"),s=e.split("\n"),a=1<s.length&&s[0].length<n[0].length;if(1===n.length||a)return"\n";for(var r=0,o=0;o<n.length;o++)"\n"===n[o][0]&&r++;return r>=n.length/2?"\r\n":"\r"}(s,l)),n=!1,e.delimiter)k(e.delimiter)&&(e.delimiter=e.delimiter(s),v.meta.delimiter=e.delimiter);else{var h=function(t,i,n,s,a){var o,l,h,d;a=a||[",","\t","|",";",r.RECORD_SEP,r.UNIT_SEP];for(var c=0;c<a.length;c++){var u=a[c],f=0,m=0,g=0;h=void 0;for(var v=new p({comments:s,delimiter:u,newline:i,preview:10}).parse(t),y=0;y<v.data.length;y++)if(n&&_(v.data[y]))g++;else{var C=v.data[y].length;m+=C,void 0!==h?0<C&&(f+=Math.abs(C-h),h=C):h=C}0<v.data.length&&(m/=v.data.length-g),(void 0===l||f<=l)&&(void 0===d||d<m)&&1.99<m&&(l=f,o=u,d=m)}return{successful:!!(e.delimiter=o),bestDelimiter:o}}(s,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);h.successful?e.delimiter=h.bestDelimiter:(n=!0,e.delimiter=r.DefaultDelimiter),v.meta.delimiter=e.delimiter}var d=C(e);return e.preview&&e.header&&d.preview++,t=s,i=new p(d),v=i.parse(t,a,o),b(),u?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,i.abort(),t=k(e.chunk)?"":t.substring(i.getCharIndex())},this.resume=function(){h.streamer._halted?(u=!1,h.streamer.parseChunk(t,!0)):setTimeout(h.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,i.abort(),v.meta.aborted=!0,k(e.complete)&&e.complete(v),t=""}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(e){var t,i=(e=e||{}).delimiter,n=e.newline,s=e.comments,a=e.step,o=e.preview,l=e.fastMode,h=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(h=e.escapeChar),("string"!=typeof i||-1<r.BAD_DELIMITERS.indexOf(i))&&(i=","),s===i)throw new Error("Comment character same as delimiter");!0===s?s="#":("string"!=typeof s||-1<r.BAD_DELIMITERS.indexOf(s))&&(s=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var d=0,c=!1;this.parse=function(e,r,u){if("string"!=typeof e)throw new Error("Input must be a string");var f=e.length,p=i.length,g=n.length,v=s.length,y=k(a),C=[],_=[],b=[],w=d=0;if(!e)return P();if(l||!1!==l&&-1===e.indexOf(t)){for(var E=e.split(n),x=0;x<E.length;x++){if(b=E[x],d+=b.length,x!==E.length-1)d+=n.length;else if(u)return P();if(!s||b.substring(0,v)!==s){if(y){if(C=[],M(b.split(i)),F(),c)return P()}else M(b.split(i));if(o&&o<=x)return C=C.slice(0,o),P(!0)}}return P()}for(var L=e.indexOf(i,d),D=e.indexOf(n,d),S=new RegExp(m(h)+m(t),"g"),T=e.indexOf(t,d);;)if(e[d]!==t)if(s&&0===b.length&&e.substring(d,d+v)===s){if(-1===D)return P();d=D+g,D=e.indexOf(n,d),L=e.indexOf(i,d)}else if(-1!==L&&(L<D||-1===D))b.push(e.substring(d,L)),d=L+p,L=e.indexOf(i,d);else{if(-1===D)break;if(b.push(e.substring(d,D)),I(D+g),y&&(F(),c))return P();if(o&&C.length>=o)return P(!0)}else for(T=d,d++;;){if(-1===(T=e.indexOf(t,T+1)))return u||_.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:C.length,index:d}),A();if(T===f-1)return A(e.substring(d,T).replace(S,t));if(t!==h||e[T+1]!==h){if(t===h||0===T||e[T-1]!==h){-1!==L&&L<T+1&&(L=e.indexOf(i,T+1)),-1!==D&&D<T+1&&(D=e.indexOf(n,T+1));var O=z(-1===D?L:Math.min(L,D));if(e.substr(T+1+O,p)===i){b.push(e.substring(d,T).replace(S,t)),e[d=T+1+O+p]!==t&&(T=e.indexOf(t,d)),L=e.indexOf(i,d),D=e.indexOf(n,d);break}var R=z(D);if(e.substring(T+1+R,T+1+R+g)===n){if(b.push(e.substring(d,T).replace(S,t)),I(T+1+R+g),L=e.indexOf(i,d),T=e.indexOf(t,d),y&&(F(),c))return P();if(o&&C.length>=o)return P(!0);break}_.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:C.length,index:d}),T++}}else T++}return A();function M(e){C.push(e),w=d}function z(t){var i=0;if(-1!==t){var n=e.substring(T+1,t);n&&""===n.trim()&&(i=n.length)}return i}function A(t){return u||(void 0===t&&(t=e.substring(d)),b.push(t),d=f,M(b),y&&F()),P()}function I(t){d=t,M(b),b=[],D=e.indexOf(n,d)}function P(e){return{data:C,errors:_,meta:{delimiter:i,linebreak:n,aborted:c,truncated:!!e,cursor:w+(r||0)}}}function F(){a(P()),C=[],_=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return d}}function g(e){var t=e.data,i=s[t.workerId],n=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){n=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(k(i.userStep)){for(var r=0;r<t.results.data.length&&(i.userStep({data:t.results.data[r],errors:t.results.errors,meta:t.results.meta},a),!n);r++);delete t.results}else k(i.userChunk)&&(i.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!n&&v(t.workerId,t.results)}function v(e,t){var i=s[e];k(i.userComplete)&&i.userComplete(t),i.terminate(),delete s[e]}function y(){throw new Error("Not implemented.")}function C(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=C(e[i]);return t}function _(e,t){return function(){e.apply(t,arguments)}}function k(e){return"function"==typeof e}return n&&(t.onmessage=function(e){var i=e.data;if(void 0===r.WORKER_ID&&i&&(r.WORKER_ID=i.workerId),"string"==typeof i.input)t.postMessage({workerId:r.WORKER_ID,results:r.parse(i.input,i.config),finished:!0});else if(t.File&&i.input instanceof File||i.input instanceof Object){var n=r.parse(i.input,i.config);n&&t.postMessage({workerId:r.WORKER_ID,results:n,finished:!0})}}),(h.prototype=Object.create(l.prototype)).constructor=h,(d.prototype=Object.create(l.prototype)).constructor=d,(c.prototype=Object.create(c.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,r},"function"==typeof define&&define.amd?define([],m):g=m();var v=t.version;const y=document.documentElement;new class{constructor(e){this.canvas=e,this.isDragging=!1,this.zoom=n,this.dragPosition=s,this.contextmenu=new d(this),this.meta=i.meta,this.style=i.style,["wheel","dragenter","dragover","dragleave","drop","contextmenu"].forEach((e=>{document.addEventListener(e,this.onEventPrevent,{passive:!1})})),document.addEventListener("keydown",this.onKeyDown),window.addEventListener("resize",this.onResize.bind(this)),this.canvas.addEventListener("drop",this.onCanvasDrop.bind(this)),this.canvas.addEventListener("click",this.onCanvasClick.bind(this)),this.canvas.addEventListener("wheel",this.onCanvasWheel.bind(this)),this.canvas.addEventListener("keydown",this.onCanvasKeyDown.bind(this)),this.canvas.addEventListener("mousemove",this.onCanvasMouseMove.bind(this)),this.canvas.addEventListener("mousedown",this.onCanvasMouseDown.bind(this)),this.canvas.addEventListener("contextmenu",this.onCanvasContextmenu.bind(this)),["dragenter","dragover"].forEach((e=>{this.canvas.addEventListener(e,this.highlight.bind(this))})),["dragleave","drop"].forEach((e=>{this.canvas.addEventListener(e,this.unhighlight.bind(this))})),this.renderLandingPage(),this.canvas.focus()}onEventPrevent(e){e.preventDefault(),e.stopPropagation()}onKeyDown(e){!e.ctrlKey&&!e.metaKey||"+"!==e.key&&"-"!==e.key||(e.preventDefault(),e.stopPropagation())}onCanvasMouseDown(e){this.dragPosition={left:y.scrollLeft,top:y.scrollTop,x:e.clientX,y:e.clientY},this.canvasMouseMoveCallback=this.onCanvasMouseDrag.bind(this),this.canvasMouseUpCallback=this.onCanvasMouseUp.bind(this),this.canvas.addEventListener("mousemove",this.canvasMouseMoveCallback),document.addEventListener("mouseup",this.canvasMouseUpCallback)}onCanvasMouseDrag(e){this.canvas.style.cursor="grabbing",this.isDragging=!0;const t=e.clientX-this.dragPosition.x,i=e.clientY-this.dragPosition.y;y.scrollLeft=this.dragPosition.left-t,y.scrollTop=this.dragPosition.top-i}onCanvasKeyDown(e){if(!this.hasData())return;const t=e.key.toLowerCase();({s:this.scrollTimeline.bind(this,"start"),e:this.scrollTimeline.bind(this,"end"),z:this.resetZoom.bind(this)})[t]?.call()}onCanvasMouseMove(e){const t=this.hitDetection(e.clientX,e.clientY)?"pointer":"default";this.canvas.style.cursor=t}onCanvasWheel(e){e.preventDefault(),e.stopPropagation(),this.hasData()&&e.ctrlKey&&this.zoomTimeline(e.clientX,e.clientY,e.deltaY)}onCanvasClick(e){if(this.contextmenu.hide(),this.isDragging)return void(this.isDragging=!1);const t=this.hitDetection(e.clientX,e.clientY);if(t){const e=`\n                <span style="\n                    width: 20px;\n                    height: 20px;\n                    border-radius: 50%;\n                    margin-right: 0.5rem;\n                    flex-shrink: 0;\n                    background-color: ${t.fillColor};\n                    border: 2px solid ${t.strokeColor};\n                "></span>\n                ${t.title}\n            `,i=`\n                <p>${t.description}</p>\n                <p>${t.timestamp.toLocaleString(this.meta.locale)}</p>\n            `;new u(e,i)}}onCanvasMouseUp(){this.canvas.removeEventListener("mousemove",this.canvasMouseMoveCallback),document.removeEventListener("mouseup",this.canvasMouseUpCallback),this.canvas.style.cursor="default"}onCanvasDrop(e){const t=e.dataTransfer.files.item(0),i=t.name.lastIndexOf("."),n=t.name.substring(0,i)||t.name,s=t.name.substring(i+1)||t.name;this.filename=n;const a={json:this.parseJSONFile,csv:this.parseCSVFile}[s];if(a)a.call(this,t);else{new p('\n                <h3 class="at-m-0">Oops!</h3>\n                <p>Can only parse <strong>.json</strong> or <strong>.csv</strong> files</p>\n            ')}}onResize(){this.hasData()?this.render():this.renderLandingPage()}onCanvasContextmenu(e){this.hasData()&&this.contextmenu.show(e)}contextmenuOnExportPNG(e,t){const i=this.canvas.toDataURL("image/png",1),n=document.createElement("a");n.href=i,n.download=this.filename+".png",document.body.appendChild(n),n.click(),document.body.removeChild(n)}contextmenuOnAbout(e,t){new p(`\n            <h3 class="at-m-0">Version ${v}</h3>\n            <p>Developed by Qulle <a href="https://github.com/qulle/activity-timeline" target="_blank" class="at-link">github.com/qulle/activity-timeline</a></p>\n        `)}contextmenuOnZoomIn(e,t){this.zoomTimeline(e,t,-1)}contextmenuOnZoomOut(e,t){this.zoomTimeline(e,t,1)}zoomTimeline(e,t,i){const n=-1*Math.sign(i);let s=(e+y.scrollLeft)/this.zoom.value,a=(t+y.scrollTop)/this.zoom.value;this.zoom.value+=n*this.zoom.factor*this.zoom.value,this.zoom.value=Math.max(this.zoom.min,Math.min(this.zoom.max,this.zoom.value));let r={x:s*this.zoom.value-e,y:a*this.zoom.value-t};this.render(),y.scrollLeft=r.x,y.scrollTop=r.y}scrollTimeline(e){this.canvas.scrollIntoView({behavior:"smooth",block:"center",inline:e})}resetZoom(){this.zoom.value=1,this.render()}highlight(){this.canvas.classList.add(a.highlightClass)}unhighlight(){this.canvas.classList.remove(a.highlightClass)}parseJSONFile(e){const t=this,n=new FileReader;n.readAsText(e),n.onloadend=function(){let e;try{const s=n.result,a=JSON.parse(s,(function(t,i){return"date"===t?(e=i,i=new Date(i)):"timestamp"===t&&(i=new Date(e+" "+i)),"string"==typeof i&&i.trim(),i})),r={meta:{...i.meta,...a.meta||{}},style:{...i.style,...a.style||{}},days:[...i.days,...a.days||[]]};t.setData(r),t.render(),t.scrollTimeline("end")}catch(e){console.error(e);new p('\n                    <h3 class="at-m-0">Oops!</h3>\n                    <p>Error parsing the <strong>JSON</strong> file - check the syntax</p>\n                ')}}}parseCSVFile(t){const n=this,s=new FileReader;s.readAsText(t),s.onloadend=function(){try{let t={},a={};const r=["timestamp","title","description","fillColor","strokeColor",""],o=s.result,l=e(g).parse(o,{header:!0,delimiter:";",transformHeader:function(e,i){if(5===i){const i=JSON.parse(e);t=i.meta,a=i.style}return r[i]},transform:function(e,t){return e.trim()}}).data.reduce(((e,t)=>{const i=new Date(t.timestamp),n=i.toLocaleDateString();return t.timestamp=i,e[n]||(e[n]=[]),e[n].push(t),e}),{}),h=Object.keys(l).map((e=>({date:new Date(e),activities:l[e]}))),d={meta:{...i.meta,...t||{}},style:{...i.style,...a||{}},days:[...i.days,...h||[]]};n.setData(d),n.render(),n.scrollTimeline("end")}catch(e){console.error(e);new p('\n                    <h3 class="at-m-0">Oops!</h3>\n                    <p>Error parsing the <strong>CSV</strong> file - check the syntax</p>\n                ')}}}hasData(){return Array.isArray(this.days)&&this.days.length>0}calculateWidth(){let e=window.innerWidth;const t=a.xPadding*(this.zoom.value>1?this.zoom.value:1)+a.stepDistanceXAxis*a.amplification*this.days.length*this.zoom.value;return t>e&&(e=t),e}calculateHeight(){let e=window.innerHeight,t=0;this.days.forEach((e=>{e.activities.length>t&&(t=e.activities.length)}));const i=a.yPadding*(this.zoom.value>1?this.zoom.value:1)+a.stepDistanceYAxis*t*2*this.zoom.value;return i>e&&(e=i),e}getVerticalMid(){return(this.canvas.height/2-this.style.lineThickness/2)/this.zoom.value}isToday(e){const t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}getWeekDayName(e){const t=e.toLocaleString(this.meta.locale,{weekday:"long"});return t.charAt(0).toUpperCase()+t.slice(1)}isTop(e){return e%2==0}isBottom(e){return!this.isTop(e)}hitDetection(e,t){if(!this.hasData())return;const i=this.canvas.getBoundingClientRect(),n=(e-i.left)/this.zoom.value,s=(t-i.top)/this.zoom.value,r=a.radius;for(let e=0;e<this.days.length;e++)for(let t=0;t<this.days[e].activities.length;t++){const i=this.days[e].activities[t];if(i.x>=n-r&&i.x<=n+r&&i.y>=s-r&&i.y<=s+r)return i}}setData(e){if(this.meta=e.meta,this.style=e.style,this.days=e.days,this.days.sort(((e,t)=>e.date.getTime()-t.date.getTime())),this.days.forEach((e=>{e.activities.sort(((e,t)=>e.timestamp.getTime()-t.timestamp.getTime()))})),this.meta.version!==v){new p(`\n                <h3 class="at-m-0">Possibly version mismatch</h3>\n                <p>Application version <strong>v${v}</strong> and JSON version <strong>v${this.meta.version}</strong></p>\n            `)}}renderCircle(e,t,i,n,s,a){e.fillStyle=s,e.strokeStyle=a,e.beginPath(),e.arc(t,i,n,0,2*Math.PI),e.fill(),e.stroke()}renderLandingPage(){const e=this.canvas.getContext("2d");this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,e.clearRect(0,0,this.canvas.width,this.canvas.height);const t=window.innerWidth<a.ladingPageWidth+a.canvasInternalPadding?.9*window.innerWidth:a.ladingPageWidth,i=window.innerHeight<a.ladingPageHeight+a.canvasInternalPadding?.9*window.innerHeight:a.ladingPageHeight;e.fillStyle="#E9E9E9",e.lineWidth=this.style.lineThickness,e.strokeStyle=this.style.strokeColor,e.setLineDash([6]),e.fillRect(window.innerWidth/2-t/2,window.innerHeight/2-i/1.8,t,i),e.strokeRect(window.innerWidth/2-t/2,window.innerHeight/2-i/1.8,t,i);const n=100,s=76,r=new Path2D("M37.5 21.875C37.5 19.3886 38.4877 17.004 40.2459 15.2459C42.004 13.4877 44.3886 12.5 46.875 12.5H53.125C55.6114 12.5 57.996 13.4877 59.7541 15.2459C61.5123 17.004 62.5 19.3886 62.5 21.875V28.125C62.5 30.6114 61.5123 32.996 59.7541 34.7541C57.996 36.5123 55.6114 37.5 53.125 37.5V43.75H87.5C88.3288 43.75 89.1237 44.0792 89.7097 44.6653C90.2958 45.2513 90.625 46.0462 90.625 46.875V53.125C90.625 53.9538 90.2958 54.7487 89.7097 55.3347C89.1237 55.9208 88.3288 56.25 87.5 56.25C86.6712 56.25 85.8763 55.9208 85.2903 55.3347C84.7042 54.7487 84.375 53.9538 84.375 53.125V50H53.125V53.125C53.125 53.9538 52.7958 54.7487 52.2097 55.3347C51.6237 55.9208 50.8288 56.25 50 56.25C49.1712 56.25 48.3763 55.9208 47.7903 55.3347C47.2042 54.7487 46.875 53.9538 46.875 53.125V50H15.625V53.125C15.625 53.9538 15.2958 54.7487 14.7097 55.3347C14.1237 55.9208 13.3288 56.25 12.5 56.25C11.6712 56.25 10.8763 55.9208 10.2903 55.3347C9.70424 54.7487 9.375 53.9538 9.375 53.125V46.875C9.375 46.0462 9.70424 45.2513 10.2903 44.6653C10.8763 44.0792 11.6712 43.75 12.5 43.75H46.875V37.5C44.3886 37.5 42.004 36.5123 40.2459 34.7541C38.4877 32.996 37.5 30.6114 37.5 28.125V21.875ZM0 71.875C0 69.3886 0.98772 67.004 2.74587 65.2459C4.50403 63.4877 6.8886 62.5 9.375 62.5H15.625C18.1114 62.5 20.496 63.4877 22.2541 65.2459C24.0123 67.004 25 69.3886 25 71.875V78.125C25 80.6114 24.0123 82.996 22.2541 84.7541C20.496 86.5123 18.1114 87.5 15.625 87.5H9.375C6.8886 87.5 4.50403 86.5123 2.74587 84.7541C0.98772 82.996 0 80.6114 0 78.125L0 71.875ZM37.5 71.875C37.5 69.3886 38.4877 67.004 40.2459 65.2459C42.004 63.4877 44.3886 62.5 46.875 62.5H53.125C55.6114 62.5 57.996 63.4877 59.7541 65.2459C61.5123 67.004 62.5 69.3886 62.5 71.875V78.125C62.5 80.6114 61.5123 82.996 59.7541 84.7541C57.996 86.5123 55.6114 87.5 53.125 87.5H46.875C44.3886 87.5 42.004 86.5123 40.2459 84.7541C38.4877 82.996 37.5 80.6114 37.5 78.125V71.875ZM75 71.875C75 69.3886 75.9877 67.004 77.7459 65.2459C79.504 63.4877 81.8886 62.5 84.375 62.5H90.625C93.1114 62.5 95.496 63.4877 97.2541 65.2459C99.0123 67.004 100 69.3886 100 71.875V78.125C100 80.6114 99.0123 82.996 97.2541 84.7541C95.496 86.5123 93.1114 87.5 90.625 87.5H84.375C81.8886 87.5 79.504 86.5123 77.7459 84.7541C75.9877 82.996 75 80.6114 75 78.125V71.875Z"),o="DROP TIMELINE JSON { }";e.font="italic bold 20px Arial",e.fillStyle=this.style.textColor,e.fillText(o,window.innerWidth/2-e.measureText(o).width/2,window.innerHeight/2+s/2);const l="Version "+v;e.font="italic 14px Arial",e.fillText(l,window.innerWidth/2-e.measureText(l).width/2,window.innerHeight/2+s/2+20),e.translate(window.innerWidth/2-n/2,window.innerHeight/2-s-20),e.fill(r)}render(){const e=this.canvas.getContext("2d");this.canvas.width=this.calculateWidth(),this.canvas.height=this.calculateHeight(),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.fillStyle=this.style.backgroundColor,e.fillRect(0,0,this.canvas.width,this.canvas.height),e.scale(this.zoom.value,this.zoom.value);const t=this.getVerticalMid();e.font=`bold ${this.style.fontSize}px Arial`,e.strokeStyle=this.style.timelineStrokeColor,e.lineWidth=this.style.lineThickness,e.lineCap="round",e.beginPath(),e.moveTo(a.canvasInternalPadding,t),e.lineTo(this.canvas.width/this.zoom.value-a.canvasInternalPadding,t),e.stroke(),this.days.forEach(((i,n)=>{const s=a.xPadding+a.stepDistanceXAxis*a.amplification*n,r=t,o=this.isTop(n)?1:-1,l=this.isBottom(n)?this.style.fontSize/2:0;e.strokeStyle=this.style.timelineStrokeColor,e.beginPath(),e.setLineDash([5,8]),e.moveTo(s,r),e.lineTo(s,r+i.activities.length*a.stepDistanceYAxis*-o),e.stroke(),e.setLineDash([]),i.activities.forEach(((t,i)=>{const n=s,l=r+a.stepDistanceYAxis*(i+1)*-o;this.renderCircle(e,n,l,a.radius,t.fillColor,t.strokeColor),t.x=n,t.y=l,e.fillStyle=this.style.textColor,e.fillText(t.title,s+1.5*a.radius,r+a.stepDistanceYAxis*(i+1)*-o-10+this.style.fontSize/2),e.fillText(t.timestamp.toLocaleTimeString(this.meta.locale),s+1.5*a.radius,r+a.stepDistanceYAxis*(i+1)*-o+8+this.style.fontSize/2)})),this.renderCircle(e,s,r,a.radius,this.style.fillColor,this.style.strokeColor);const h=this.isToday(i.date)?i.date.toLocaleDateString(this.meta.locale)+" (Today)":i.date.toLocaleDateString(this.meta.locale)+" ("+this.getWeekDayName(i.date)+")";e.fillStyle=this.style.textColor,e.fillText(h,s-e.measureText(h).width/2,r+l+2*a.radius*o)}))}}(document.getElementById("activity-timeline"));</script> </body></html>